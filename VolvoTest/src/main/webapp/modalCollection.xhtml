<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<h:form id="formDialogNewUser">
		<p:growl id="growl" showDetail="true" sticky="true" />
		<p:dialog header="Create User" id="dlgCreateUser1"
			widgetVar="dlgCreateUser" modal="true" minHeight="40">
			<h:panelGrid columns="2">
				<p:outputLabel value="Name*: "/>
				<p:inputText id="createInputName" value="#{userModel.user.name}" required="true" requiredMessage="Invalid name." />
				<p:outputLabel value="Description*: " />
				<p:inputText id="createInputDesc" value="#{userModel.user.description}" required="true" requiredMessage="Invalid description." />
				<p:outputLabel value="Department*: " />
				<p:selectOneMenu id="editInputDepartment" converter="departamentConverter" value="#{userModel.user.department}" required="true" requiredMessage="Invalid Department">
					<f:selectItem itemLabel="Select.." itemValue=""/>
					<f:selectItems value="#{departmentModel.findAllDepartments()}" var="dep" itemValue="#{dep}" itemLabel="#{dep.name}" />
				</p:selectOneMenu>
				
				<p:outputLabel value="Permissions: " />
				<p:selectCheckboxMenu id="multiple" value="#{userModel.user.permissions}" converter="permissionConverter" label="Permissions" multiple="true"
                              filter="true" filterMatchMode="startsWith" panelStyle="width:250px">
            		<f:selectItems value="#{permissionModel.findAllPermissions()}" var="pe" itemValue="#{pe}" itemLabel="#{pe.name}" />
        		</p:selectCheckboxMenu>
				
				<p:commandButton value="Save" id="buttonCreateUser"
					actionListener="#{userModel.save}" icon="ui-icon-disk"
					update="@form" />
				<p:outputLabel value="" />
			</h:panelGrid>
		</p:dialog>
	</h:form>
	<h:form id="formDialogEditUser">
		<p:growl id="growl" showDetail="true" sticky="true" />
		<p:dialog header="Edit User" id="dlgEditUser1" widgetVar="dlgEditUser"
			modal="true" minHeight="40">
			<h:panelGrid columns="2">
				<p:outputLabel value="Id*: " />
				<p:inputText id="editInputId" value="#{userModel.user.id}" disabled="true" />
				<p:outputLabel value="Name*: " />
				<p:inputText id="editInputName" value="#{userModel.user.name}" required="true" requiredMessage="Invalid name." />
				<p:outputLabel value="Description*: " />
				<p:inputText id="editInputDesc"	value="#{userModel.user.description}" required="true" />
				<p:outputLabel value="Department*: " />
				<p:selectOneMenu id="editInputDepartment" converter="departamentConverter" value="#{userModel.user.department}" required="true" requiredMessage="Invalid Department">
					<f:selectItem itemLabel="Select.." itemValue=""/>
					<f:selectItems value="#{departmentModel.findAllDepartments()}" var="dep" itemValue="#{dep}" itemLabel="#{dep.name}" />
				</p:selectOneMenu>
				
				<p:outputLabel value="Permissions: " />
				<p:selectManyCheckbox id="multiple" value="#{userModel.user.permissions}" converter="permissionConverter" label="Permissions" multiple="true"
                              filter="true" filterMatchMode="startsWith" panelStyle="width:250px" columns="2">
            		<f:selectItems value="#{permissionModel.findAllPermissions()}" var="pe" itemValue="#{pe}" itemLabel="#{pe.name}" />
        		</p:selectManyCheckbox>
				
				<p:commandButton value="Save" id="buttonEditUser"
					actionListener="#{userModel.edit}" icon="ui-icon-disk"
					update="@form" />
				<p:outputLabel value="" />
			</h:panelGrid>
		</p:dialog>
	</h:form>
	
	<h:form id="formDialogNewDepartment">
		<p:growl id="growl" showDetail="true" sticky="true" />
		<p:dialog header="Create Department" id="dlgCreateDepartment1"
			widgetVar="dlgCreateDepartment" modal="true" minHeight="40">
			<h:panelGrid columns="2">
				<p:outputLabel value="Name*: " />
				<p:inputText id="createInputName" value="#{departmentModel.department.name}" required="true" requiredMessage="Invalid name." />
				<p:outputLabel value="Description*: " />
				<p:inputText id="createInputDesc" value="#{departmentModel.department.description}" required="true" requiredMessage="Invalid description." />
				
				<p:commandButton value="Save" id="buttonNewDepartment"
					actionListener="#{departmentModel.save}" icon="ui-icon-disk"
					update="@form" />
				<p:outputLabel value="" />
			</h:panelGrid>
		</p:dialog>
	</h:form>
	<h:form id="formDialogEditDepartment">
		<p:growl id="growl" showDetail="true" sticky="true" />
		<p:dialog header="Edit Department" id="dlgEditDepartment1" widgetVar="dlgEditDepartment"
			modal="true" minHeight="40">
			<h:panelGrid columns="2">
				<p:outputLabel value="Name*: " />
				<p:inputText id="editInputName" value="#{departmentModel.department.name}" required="true" requiredMessage="Invalid name." />
				<p:outputLabel value="Description*: " />
				<p:inputText id="editInputDesc"	value="#{departmentModel.department.description}" required="true" requiredMessage="Invalid description." />
				
				<p:commandButton value="Save" id="buttonEditDepartment"
					actionListener="#{departmentModel.edit}" icon="ui-icon-disk"
					update="@form" />
				<p:outputLabel value="" />
					
			</h:panelGrid>
		</p:dialog>
	</h:form>
	
	<h:form id="formDialogNewPermission">
		<p:growl id="growl" showDetail="true" sticky="true" />
		<p:dialog header="Create Permission" id="dlgCreatePermission1"
			widgetVar="dlgCreatePermission" modal="true" minHeight="40">
			<h:panelGrid columns="2">
				<p:outputLabel value="Name*: " />
				<p:inputText id="createInputName" value="#{permissionModel.permission.name}" required="true" requiredMessage="Invalid name." />
				<p:outputLabel value="Description*: " />
				<p:inputText id="createInputDesc" value="#{permissionModel.permission.description}" required="true" requiredMessage="Invalid description." />
				
				<p:commandButton value="Save" id="buttonNewPermission"
					actionListener="#{permissionModel.save}" icon="ui-icon-disk"
					update="@form" />
				<p:outputLabel value="" />
			</h:panelGrid>
		</p:dialog>
	</h:form>
	<h:form id="formDialogEditPermission">
		<p:growl id="growl" showDetail="true" sticky="true" />
		<p:dialog header="Edit Permission" id="dlgEditPermission1" widgetVar="dlgEditPermission"
			modal="true" minHeight="40">
			<h:panelGrid columns="2">
				<p:outputLabel value="Id: " />
				<p:inputText id="editInputId" value="#{permissionModel.permission.id}" disabled="true"/>
				<p:outputLabel value="Name*: " />
				<p:inputText id="editInputName" value="#{permissionModel.permission.name}" required="true" requiredMessage="Invalid name." />
				<p:outputLabel value="Description*: " />
				<p:inputText id="editInputDesc"	value="#{permissionModel.permission.description}" required="true" requiredMessage="Invalid description."/>
				
				<p:commandButton value="Save" id="buttonEditPermission"
					actionListener="#{permissionModel.edit}" icon="ui-icon-disk"
					update="@form" />
				<p:outputLabel value="" />
			</h:panelGrid>
		</p:dialog>
	</h:form>

</html>